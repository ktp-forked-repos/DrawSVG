import drawSVG

from math import floor
from string import ascii_lowercase


counts = {'a': {'total': 6299, 'i': 1212, 'o': 1351, 'e': 1208, 'u': 928, 'c': 102, 'k': 49, 'l': 148, 'y': 117, 's': 239, 'n': 107, 'r': 157, 'b': 59, 'd': 82, 'p': 99, 't': 131, 'w': 61, 'f': 51, 'm': 42, 'g': 60, 'h': 70, 'x': 12, 'v': 9, 'z': 1, 'j': 4}, 'b': {'total': 6297, 'd': 400, 'g': 422, 'l': 396, 'o': 54, 'r': 442, 'c': 447, 'f': 425, 'm': 531, 's': 410, 't': 541, 'e': 106, 'n': 240, 'p': 576, 'w': 333, 'k': 115, 'j': 147, 'i': 13, 'h': 330, 'v': 121, 'y': 101, 'a': 59, 'z': 35, 'x': 34, 'u': 18, 'q': 1}, 'c': {'total': 5956, 'm': 343, 'f': 319, 's': 511, 'b': 447, 'w': 317, 'e': 112, 'l': 333, 'n': 418, 'r': 364, 't': 592, 'x': 25, 'g': 314, 'k': 141, 'p': 482, 'h': 326, 'a': 102, 'd': 350, 'y': 80, 'o': 76, 'u': 12, 'v': 136, 'j': 70, 'i': 36, 'z': 50}, 'd': {'total': 11328, 'b': 400, 'r': 2381, 's': 2951, 'f': 264, 'g': 395, 'j': 106, 'l': 521, 'm': 431, 'n': 549, 't': 785, 'p': 454, 'h': 256, 'v': 174, 'k': 289, 'x': 50, 'z': 85, 'e': 229, 'y': 185, 'w': 238, 'a': 82, 'c': 350, 'o': 64, 'i': 55, 'u': 30, 'q': 4}, 'e': {'total': 6641, 'b': 106, 'k': 173, 'o': 847, 'a': 1208, 't': 371, 'y': 516, 'i': 723, 'c': 112, 'u': 475, 'p': 170, 'v': 23, 's': 443, 'l': 253, 'g': 163, 'd': 229, 'm': 121, 'r': 204, 'w': 94, 'h': 120, 'n': 207, 'x': 22, 'f': 43, 'j': 9, 'z': 9}, 'f': {'total': 4463, 'l': 292, 'm': 314, 'p': 371, 'c': 319, 'b': 425, 'v': 100, 'd': 264, 'h': 223, 'k': 113, 's': 366, 't': 387, 'w': 252, 'y': 58, 'n': 204, 'g': 215, 'r': 272, 'a': 51, 'x': 10, 'o': 32, 'j': 106, 'e': 43, 'z': 15, 'i': 15, 'u': 14, 'q': 2}, 'g': {'total': 5012, 'b': 422, 'd': 395, 'h': 161, 'l': 257, 'm': 271, 'r': 299, 'x': 40, 'c': 314, 'k': 209, 't': 504, 'f': 215, 'w': 239, 'e': 163, 's': 339, 'p': 336, 'y': 117, 'n': 314, 'o': 52, 'a': 60, 'z': 46, 'q': 12, 'v': 116, 'i': 24, 'j': 82, 'u': 25}, 'h': {'total': 4979, 'r': 375, 'l': 461, 'g': 161, 'f': 223, 'd': 256, 'm': 325, 's': 375, 'n': 200, 't': 493, 'z': 30, 'c': 326, 'b': 330, 'p': 416, 'w': 292, 'e': 120, 'j': 100, 'k': 162, 'a': 70, 'y': 107, 'u': 9, 'o': 57, 'v': 59, 'i': 23, 'x': 9}, 'i': {'total': 4272, 'k': 30, 't': 74, 'u': 681, 'v': 10, 'x': 7, 'y': 108, 'a': 1212, 'l': 116, 'w': 55, 'e': 723, 'o': 763, 'b': 13, 'r': 96, 'n': 68, 's': 95, 'f': 15, 'p': 39, 'g': 24, 'd': 55, 'h': 23, 'm': 20, 'c': 36, 'j': 8, 'z': 1}, 'j': {'total': 1592, 'd': 106, 's': 105, 't': 120, 'b': 147, 'k': 26, 'l': 120, 'm': 97, 'n': 75, 'p': 119, 'r': 117, 'w': 80, 'h': 100, 'y': 38, 'f': 106, 'e': 9, 'c': 70, 'v': 34, 'z': 16, 'g': 82, 'i': 8, 'o': 10, 'a': 4, 'u': 1, 'x': 2}, 'k': {'total': 3575, 'i': 30, 's': 248, 'e': 173, 'p': 251, 'n': 249, 'r': 221, 'f': 113, 't': 379, 'g': 209, 'y': 61, 'm': 208, 'c': 141, 'b': 115, 'd': 289, 'l': 274, 'a': 49, 'o': 37, 'j': 26, 'w': 124, 'z': 33, 'h': 162, 'v': 135, 'u': 19, 'x': 28, 'q': 1}, 'l': {'total': 7909, 'b': 396, 'r': 1037, 'n': 577, 't': 730, 'f': 292, 'i': 116, 'd': 521, 'h': 461, 'g': 257, 'c': 333, 'y': 100, 'e': 253, 's': 553, 'o': 142, 'w': 287, 'p': 515, 'm': 467, 'v': 179, 'k': 274, 'x': 47, 'a': 148, 'j': 120, 'z': 57, 'u': 47}, 'm': {'total': 6425, 'f': 314, 'c': 343, 'b': 531, 'd': 431, 'g': 271, 'p': 638, 'r': 478, 't': 665, 's': 407, 'h': 325, 'x': 44, 'k': 208, 'n': 309, 'e': 121, 'l': 467, 'z': 57, 'j': 97, 'a': 42, 'w': 288, 'y': 122, 'v': 155, 'o': 72, 'u': 20, 'i': 20}, 'n': {'total': 6743, 'l': 577, 'r': 774, 's': 605, 'd': 549, 'b': 240, 'v': 157, 'p': 403, 't': 673, 'c': 418, 'k': 249, 'w': 225, 'u': 61, 'y': 124, 'z': 53, 'h': 200, 'f': 204, 'o': 79, 'm': 309, 'g': 314, 'x': 72, 'a': 107, 'i': 68, 'e': 207, 'j': 75}, 'o': {'total': 4968, 'b': 54, 'a': 1351, 'e': 847, 'w': 73, 'p': 99, 'u': 599, 'i': 763, 'n': 79, 't': 103, 'l': 142, 'r': 166, 's': 150, 'g': 52, 'k': 37, 'f': 32, 'm': 72, 'y': 116, 'd': 64, 'c': 76, 'v': 14, 'h': 57, 'x': 9, 'j': 10, 'z': 3}, 'p': {'total': 7581, 'f': 371, 'b': 576, 's': 575, 'n': 403, 'r': 448, 't': 704, 'v': 205, 'w': 413, 'x': 41, 'y': 131, 'o': 99, 'd': 454, 'k': 251, 'm': 638, 'e': 170, 'c': 482, 'l': 515, 'g': 336, 'h': 416, 'a': 99, 'j': 119, 'i': 39, 'z': 61, 'u': 35}, 'q': {'total': 23, 'g': 12, 'd': 4, 's': 3, 'k': 1, 'b': 1, 'f': 2}, 'r': {'total': 10873, 'b': 442, 'd': 2381, 'l': 1037, 'n': 774, 'h': 375, 's': 1382, 't': 759, 'u': 107, 'p': 448, 'g': 299, 'c': 364, 'm': 478, 'k': 221, 'w': 295, 'o': 166, 'f': 272, 'x': 64, 'y': 161, 'i': 96, 'e': 204, 'a': 157, 'j': 117, 'v': 195, 'z': 79}, 's': {'total': 12188, 't': 943, 'k': 248, 'c': 511, 'n': 605, 'b': 410, 'd': 2951, 'r': 1382, 'p': 575, 'j': 105, 'f': 366, 'm': 407, 'y': 776, 'h': 375, 'e': 443, 'v': 171, 'w': 303, 'l': 553, 'g': 339, 'o': 150, 'u': 59, 'a': 239, 'z': 117, 'i': 95, 'x': 62, 'q': 3}, 't': {'total': 10089, 's': 943, 'i': 74, 'l': 730, 'b': 541, 'r': 759, 'w': 430, 'y': 222, 'n': 673, 'p': 704, 'e': 371, 'd': 785, 'c': 592, 'm': 665, 'j': 120, 'f': 387, 'k': 379, 'g': 504, 'h': 493, 'o': 103, 'a': 131, 'u': 65, 'v': 236, 'z': 107, 'x': 75}, 'u': {'total': 3297, 'i': 681, 'r': 107, 'a': 928, 'o': 599, 'e': 475, 'n': 61, 's': 59, 't': 65, 'l': 47, 'w': 32, 'm': 20, 'v': 10, 'k': 19, 'h': 9, 'f': 14, 'c': 12, 'b': 18, 'x': 6, 'y': 43, 'p': 35, 'd': 30, 'g': 25, 'j': 1, 'z': 1}, 'v': {'total': 2467, 'i': 10, 'f': 100, 'n': 157, 'p': 205, 'e': 23, 'd': 174, 's': 171, 'w': 112, 'l': 179, 'b': 121, 'y': 45, 't': 236, 'r': 195, 'm': 155, 'k': 135, 'u': 10, 'o': 14, 'g': 116, 'x': 27, 'c': 136, 'h': 59, 'j': 34, 'z': 44, 'a': 9}, 'w': {'total': 4738, 'i': 55, 'c': 317, 'o': 73, 't': 430, 'p': 413, 'n': 225, 'f': 252, 'r': 295, 'b': 333, 's': 303, 'x': 37, 'y': 121, 'g': 239, 'v': 112, 'l': 287, 'd': 238, 'z': 37, 'h': 292, 'e': 94, 'a': 61, 'j': 80, 'k': 124, 'u': 32, 'm': 288}, 'x': {'total': 755, 'i': 7, 'p': 41, 'c': 25, 'g': 40, 'm': 44, 'w': 37, 'd': 50, 'l': 47, 'r': 64, 'n': 72, 'e': 22, 'f': 10, 'y': 25, 's': 62, 'b': 34, 'v': 27, 't': 75, 'u': 6, 'a': 12, 'h': 9, 'o': 9, 'k': 28, 'z': 7, 'j': 2}, 'y': {'total': 3505, 'i': 108, 't': 222, 'p': 131, 'e': 516, 'l': 100, 'f': 58, 'n': 124, 's': 776, 'k': 61, 'w': 121, 'd': 185, 'g': 117, 'a': 117, 'r': 161, 'v': 45, 'b': 101, 'c': 80, 'j': 38, 'm': 122, 'x': 25, 'o': 116, 'z': 31, 'h': 107, 'u': 43}, 'z': {'total': 975, 'n': 53, 'h': 30, 'd': 85, 'm': 57, 'w': 37, 's': 117, 'l': 57, 'k': 33, 't': 107, 'b': 35, 'f': 15, 'y': 31, 'g': 46, 'r': 79, 'p': 61, 'j': 16, 'v': 44, 'c': 50, 'e': 9, 'a': 1, 'x': 7, 'o': 3, 'i': 1, 'u': 1}}
max_value = max(max(count for letter, count in letter_counts.items() if letter != 'total') for letter_counts in counts.values())

width = 405
height = 405

svg = drawSVG.SVG({'viewBox': "0 0 {} {}".format(width, height)})

box_size = floor(width / 27)
header_size = box_size + (width - 27 * box_size) * 0.5

svg.addStyle('text', { 'text-anchor': 'middle', 'dominant-baseline': 'middle', 'font-size': f"{floor(box_size * 0.9)}px" })
svg.addStyle('.gridline', { 'stroke-width': 1, 'stroke': '#888' })

svg.add('line', {
    'class': 'gridline', 'x1': 0, 'x2': width, 'y1': header_size + 0.5, 'y2': header_size + 0.5
})

svg.add('line', {
    'class': 'gridline', 'x1': header_size + 0.5, 'x2': header_size + 0.5, 'y1': 0, 'y2': width
})

# Add letters along top and bottom
for i, letter in enumerate(ascii_lowercase):
    x = header_size + (i + 0.5) * box_size
    y = header_size * 0.5
    svg.add('text', { 'x': x, 'y': y }, letter)
    svg.add('text', { 'x': y, 'y': x }, letter)

svg.write('heatmap.svg')
